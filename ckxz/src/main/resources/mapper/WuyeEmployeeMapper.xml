<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.app.ckxz.wuyeemployee.mapper.WuyeEmployeeMapper" >
  <resultMap id="BaseResultMap" type="com.app.ckxz.wuyeemployee.moder.WuyeEmployee" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" javaType="Long" />
    <result column="uuid" property="uuid" javaType="String" />
    <result column="employee_name" property="employeeName" javaType="String" />
    <result column="user_id" property="userId" javaType="String" />
    <result column="phone" property="phone" javaType="String" />
    <result column="email" property="email" javaType="String" />
    <result column="state" property="state" javaType="String" />
    <result column="createor" property="createor" javaType="String" />
    <result column="created_date" property="createdDate" javaType="date" />
    <result column="quit_date" property="quitDate" javaType="date" />
    <result column="note" property="note" javaType="String" />
    <result column="department_uuid" property="departmentUuid" javaType="String" />
    <result column="wuye_uuid" property="wuyeUuid" javaType="String" />
    <result column="role_value" property="roleName" javaType="String" />
    <result column="department_name" property="departmentName" javaType="String" />
    <result column="real_email" property="realEmail" javaType="String" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from wuye_employee
    where id = #{id}
  </delete>
  <insert id="insert" parameterType="com.app.ckxz.wuyeemployee.moder.WuyeEmployee" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into wuye_employee (id, uuid, employee_name, 
      user_id, phone, email, 
      state, createor, created_date, 
      quit_date, note, department_uuid, 
      wuye_uuid)
    values (#{id}, #{uuid}, #{employeeName},
      #{userId}, #{phone}, #{email},
      #{state}, #{createor}, #{createdDate},
      #{quitDate}, #{note}, #{departmentUuid},
      #{wuyeUuid})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.app.ckxz.wuyeemployee.moder.WuyeEmployee" >
    update wuye_employee
    set uuid = #{uuid},
      employee_name = #{employeeName},
      user_id = #{userId},
      phone = #{phone},
      email = #{email},
      state = #{state},
      createor = #{createor},
      created_date = #{createdDate},
      quit_date = #{quitDate},
      note = #{note},
      department_uuid = #{departmentUuid},
      wuye_uuid = #{wuyeUuid}
    where id = #{id}
  </update>

  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select id, uuid, employee_name, user_id, phone, email, state, createor, created_date, 
    quit_date, note, department_uuid, wuye_uuid
    from wuye_employee
    where id = #{id}
  </select>
  <select id="selectAll" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select id, uuid, employee_name, user_id, phone, email, state, createor, created_date, 
    quit_date, note, department_uuid, wuye_uuid
    from wuye_employee
  </select>

  <select id="selectWuyeEmployeeCondition" resultMap="BaseResultMap" parameterType="java.util.Map">
    SELECT
      u.uuid as user_id,
      u.user_id,
      wd.department_name,
      wr.role_value,
      wee.uuid,
      wee.employee_name,
      wee.phone,
      wee.createor,
      wee.email,
      wee.state,
      wee.created_date,
      wee.quit_date,
      wee.note
      FROM
          wuye_employee wee
      LEFT JOIN wuye_department wd ON wee.department_uuid = wd.uuid
      LEFT JOIN wuye_role_personnel wrp ON wrp.employee_uuid = wd.uuid
      LEFT JOIN wuye_roles wr ON wr.uuid = wrp.role_uuid
      LEFT JOIN user_d  u on u.uuid = wee.user_id
      where wee.state = #{state} and wee.wuye_uuid = #{wuyeUuid}
  </select>
</mapper>